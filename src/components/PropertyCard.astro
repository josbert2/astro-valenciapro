---
interface Props {
    title: string;
    location: string;
    price: string;
    operation: string;
    image: string;
    url: string;
    bathrooms?: number;
    garages?: number;
    floor?: string;
    size?: string;
    type?: string;
}

const {
    title,
    location,
    price,
    operation,
    image,
    url,
    bathrooms,
    garages,
    floor,
    size,
    type = "departamento"
} = Astro.props;

const operationColor = operation.toLowerCase() === "venta" ? "bg-[#2f2f2f]" : "bg-primary";
---

<div class={`property-item type-${type.toLowerCase()}`}>
    <div class="group relative bg-white rounded-2xl overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300 h-full">
        <div class="relative h-[500px] overflow-hidden">
            <img 
                src={image} 
                alt={title}
                class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
                loading="lazy"
            />
            <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent"></div>
            <div class="absolute top-4 right-4">
                <span class={`${operationColor} text-white px-4 py-1.5 rounded-md text-xs font-semibold capitalize`}>
                    {operation}
                </span>
            </div>
        </div>
        
        <div class="absolute bottom-0 left-0 right-0 p-6 text-white z-10">
            <h3 class="text-xl font-semibold mb-2 line-clamp-1">
                <a href={url} class="hover:text-primary transition-colors">{title}</a>
            </h3>
            
            <p class="text-sm text-white/80 flex items-center gap-2 mb-4">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 10C21 17 12 23 12 23C12 23 3 17 3 10C3 7.61305 3.94821 5.32387 5.63604 3.63604C7.32387 1.94821 9.61305 1 12 1C14.3869 1 16.6761 1.94821 18.364 3.63604C20.0518 5.32387 21 7.61305 21 10Z"/>
                    <circle cx="12" cy="10" r="3"/>
                </svg>
                {location}
            </p>
            
            <div class="grid grid-cols-3 gap-3 py-3 border-t border-white/20 mb-4 border-b">
                {bathrooms && (
                    <span class="text-sm text-white/80 flex items-center gap-1">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                        </svg>
                        {bathrooms} Baños
                    </span>
                )}
                {garages && (
                    <span class="text-sm text-white/80 flex items-center gap-1">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M5 17H4C3.46957 17 2.96086 16.7893 2.58579 16.4142C2.21071 16.0391 2 15.5304 2 15V6C2 5.46957 2.21071 4.96086 2.58579 4.58579C2.96086 4.21071 3.46957 4 4 4H20C20.5304 4 21.0391 4.21071 21.4142 4.58579C21.7893 4.96086 22 5.46957 22 6V15C22 15.5304 21.7893 16.0391 21.4142 16.4142C21.0391 16.7893 20.5304 17 20 17H19"/>
                            <circle cx="7" cy="17" r="2"/>
                            <circle cx="17" cy="17" r="2"/>
                        </svg>
                        {garages} Garajes
                    </span>
                )}
                {floor && (
                    <span class="text-sm text-white/80 flex items-center gap-1">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 6H21M3 12H21M3 18H21"/>
                        </svg>
                        Piso {floor}
                    </span>
                )}
                {size && (
                    <span class="text-sm text-white/80 flex items-center gap-1">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="18" height="18"/>
                        </svg>
                        {size}
                    </span>
                )}
            </div>
            
            <div class="flex justify-between items-center">
                <span class="text-2xl font-light text-primary">{price}</span>
                <a href={url} class="text-primary text-sm font-medium hover:underline px-8 border border-primary rounded-lg">
                    Detalles →
                </a>
            </div>
        </div>
    </div>
</div>
